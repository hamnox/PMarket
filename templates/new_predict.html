<!doctype html>
<head>
<link rel="stylesheet" type="text/css"
    href="{{ url_for('static',filename='tables.css') }}">
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.3.js"
type="text/javascript"></script>
<script type="text/javascript">
    function validate_form() {
        var x = document.forms["newpred"]["statement"].value;
        if (x == null || x == "") {
            alert("Statement must be filled out");
            return false;
        };
        var x = document.forms["newpred"]["expectresolved"].value;
        if ((x == null || x =="")
                || !x.match(/^[12]\d{3}-[01]\d-[0123]\d$/)) {
            var r = Date.now();
            r.setDate(r.getDate() + 14);
            document.forms["newpred"]["expectresolved"].value = r.toJSON().slice(0,10)
        };
        jsondata = document.forms.to_json();
            alert(jsondata);
    }
</script>
</head>
    

<body>

<form id="newpred" method="POST" action="/new" onsubmit="return validate_form()">
prediction: <input type="text" name="statement" required><br />
prediction details: <textarea name="smalltext" rows="4" form="newpred"></textarea><br />
expected completion: <input type="date" name="expectresolved"><br />
<input type="submit" value="Submit">
</form>
